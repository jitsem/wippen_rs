<!doctype html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Wippen</title>
    <style>
        #game-area {
            background: aliceblue;
            display: flex;
            flex: 1;
            height: 100px;
        }
        .card {
            margin: 2px;
            border: 2px gray;
            box-shadow: black 1px 1px;
            background: white;
            aspect-ratio: 5/7;
        }
    </style>
</head>

<body>
<div id="container">
<div id="game-area"></div>
</div>
<script type="module">

    import init, {FreshGame, Card} from "./pkg/wippen_wasm.js";
    const seed = Date.now();
    init().then(() => {
        let game = new FreshGame(BigInt(seed));
        let started = game.start();
        started.get_player_1_hand().forEach(
            add_card
        )
        started.get_middle().forEach(
            add_card
        )
        started.get_player_2_hand().forEach(
            add_card
        )
        console.log("Waiting for action")
    });

    function add_card(card) {
        let number = card.card_number["0"];
        let suit = card.suit;
        console.log(card);
        console.log(suit);

        let game_area = document.getElementById("game-area");

        let suitSymbols = {
            "3": {symbol:"♥", color: "red"},
            "2": {symbol:"♦", color: "red"},
            "1": {symbol:"♣", color: "black"},
            "0": {symbol:"♠", color: "black"},
        };

        let faceSymbols = {
            "13": "K",
            "12": "D",
            "11": "J",
            "1" : "A"
        }

        let cardElement = document.createElement("div");
        cardElement.className = "card";
        cardElement.innerHTML = `${faceSymbols[number] || number} ${suitSymbols[suit].symbol || suit}`;
        cardElement.style.color = suitSymbols[suit].color || "black";
        game_area.appendChild(cardElement);
    }


</script>
</body>

</html>