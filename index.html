<!doctype html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Wippen</title>
    <style>
        #game-area {
            background: aliceblue;
            display: flex;
            flex: 1;
        }
        .card {
            margin: 2px;
            border: 2px gray;
            box-shadow: black 1px 1px;
            background: white;
            aspect-ratio: 5/7;
        }
    </style>
</head>

<body>
<div id="container">
<div id="game-area"></div>
</div>
<script type="module">

    import init, {Deck} from "./pkg/wippen_wasm.js";
    const seed = Date.now();
    init().then(() => {
        let deck = new Deck();
        deck.shuffle(BigInt(seed));
        while (true){
            let card = deck.take_card()
            if(card === undefined)
                break;
            else{
                add_card(card.card_number["0"], card.suit)
            }
        }
        console.log("Book empty")
    });

    function add_card(card, suit) {
        console.log(card);
        console.log(suit);

        let game_area = document.getElementById("game-area");

        let suitSymbols = {
            "3": {symbol:"♥", color: "red"},
            "2": {symbol:"♦", color: "red"},
            "1": {symbol:"♣", color: "black"},
            "0": {symbol:"♠", color: "black"},
        };

        let faceSymbols = {
            "13": "K",
            "12": "D",
            "11": "J",
            "1" : "A"
        }

        let cardElement = document.createElement("div");
        cardElement.className = "card";
        cardElement.innerHTML = `${faceSymbols[card] || card} ${suitSymbols[suit].symbol || suit}`;
        cardElement.style.color = suitSymbols[suit].color || "black";
        game_area.appendChild(cardElement);
    }


</script>
</body>

</html>